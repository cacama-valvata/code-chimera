<p>I have encountered what might be the same problem before when I needed to run a Kalman filter for long periods but over time my covariance matrix would degenerate.  It might just be a problem of losing symmetry due to numerical error. One simple way to enforce your covariance matrix (let's call it <code>P</code>) to remain symmetric is to do:</p>

<pre><code>P = (P + P')/2  # where P' is transpose(P)
</code></pre>

<p>right after estimating <code>P</code>.</p>
